enum QTYPE {
  BOOLEAN
  TEXT
  TEMP
  TEMP_CHECKBOX
}

enum PTYPE {
  NONE
  FAMILY
  STAFF
  MANUAL
}

enum TIME {
  MORNING
  AFTERNOON
}

type Account @model @auth(rules: [{allow: owner}]) {
  id: ID!
  title: String!
  randomizeQuestions: Boolean!
}

type Person @model @auth(rules: [{allow: owner}]) {
  id: ID!
  type: PTYPE!
  fName: String!
  lName: String!
  Responses: [Response!] @connection(keyName: "byPerson", fields: ["id"])
}

type Question @model @auth(rules: [{allow: owner}]) {
  id: ID!
  type: QTYPE!
  question: String!
  expectedResponse: String!
  checkboxes: [String!]
  responses: [ResponseQuestion!] @connection(name: "QuestionResponses")
}

type Response @model @key(name: "byPerson", fields: ["personID"]) @auth(rules: [{allow: owner}]) {
  id: ID!
  personID: ID!
  date: AWSDate!
  formType: PTYPE!
  time: TIME!
  questions: [ResponseQuestion!] @connection(name: "ResponseQuestions")
  responses: [String!]!
  passed: Boolean!
}

type ResponseQuestion @model(queries: null) @auth(rules: [{allow: owner}]) {
  id: ID!
  response: Response! @connection(name: "ResponseQuestions")
  question: Question! @connection(name: "QuestionResponses")
}
 